# 内置类型

## 整数
python3 中将int和long2种整数类型合并为Int，采用变长结构。虽然这会导致更多的内存消耗，但简化了语言规则。

```
>>> 78,64,55
(78, 64, 55)
>>> 87_72_34
877234
```
### 运算符

```
>>> 3 / 2
1.5
>>> 3 // 2
1
>>> 3 % 2
1
```

### 布尔
布尔是子类型，也就是True,False 可被当作数字直接使用
- 数字零，空置(None), 空序列和空字典都被视为False，反之为True
### 内存
对于常用的小数字，解释器会在初始化时进行预缓存。这样可以 无序创建实例对象，可提高性能，且节约内存开销。
	- python3.6缓存范围是[-5, 256]
```
>>> a = -5
>>> b = -5
>>> a is b
True
>>> a = 257
>>> b = 257
>>> a is b
False
```

```
#!/bin/env python3
# -*- coding:utf-8 -*-

from __future__ import print_function
import psutil

def rss():   # 输出进程rss内存大小
    m = psutil.Process().memory_info()
    print(m.rss >> 20, "MB")

if __name__=="__main__":
    rss()    # 起始内存使用
    x = list(range(100000))  # 使用列表持有海量数字对象
    rss()    # 输出海量数字槽车个的内存开销
    del x
    rss()    # 输出回收后的内存使用
```

## 浮点数
默认float类型是存储双精度(double)浮点数，可表达16到17个小位数

## 字符串

- 字符串存储Unicode文本，是不可变序列类型
	- unicode设计的意图是解决跨语言，跨平台转换和处理需求，其用统一编码方案容纳不同地方的文件，用来解决传统编码方案的不兼容问题。

- 字符串字面量(literal)以成对的单引号，双引号和可跨行的三引号语法构成，自动合并相邻字面量。

- 转换

```
>>> s
'中国'
>>> b = s.encode("utf-16")
>>> print(b)
b'\xff\xfe-N\xfdV'
>>> b.decode("utf-16")
'中国'
>>> import sys
>>> sys.getdefaultencoding()
'utf-8'
```
- 格式化

```
>>> "{chen} like {docker}".format(chen="i", docker="python")
>>> "{0[3]}".format([2, 3, 4, 6])
>>> "{:,}".format(123456789)
```

## 列表

在操作做上看，列表像是数组和链表的综合体。除按索引访问外，还支持插入，追加，删除等操作，完全可以当作队列和棧使用。如果不考虑性能的话，列表是一种易用且功能完善的理想数据结构。
```
>>> s = [1, 2]
>>> s.insert(0, 5)
>>> s
[5, 1, 2]
>>> s.reverse()
>>> s
[2, 1, 5]
```
- 列表推导式
```
>>> [x + 1 for x in range(3)]
[1, 2 ,3]
>>> [x for x in range(6) if x % 2 == 0]
类似下面代码：
>>> d = []
>>> for x in range(6):
		if x % 2 == 0:
			d.append(x)
>>> d
[0, 2, 4]

```

## 元组

在操作方式上，元组可以视为列表的只读方式

元组使用小括号语法，但是需要与普通的括号区别开来

元组是不可变的类型，它的指针数组无须变动，故一次完成内存分配。系统会缓存复用一定长度的元组内存(含指针数组)。创建时，按所需长度提取复用，没有额外内存分配。

元组支持列表的表达式，但是不能修改，只是返回新对象


## 数组

数组与列表和元组的本质区别在于， 元素单一类型和内容嵌入

由于数组可以指定更紧凑的数字类型，所以数组可以节约更多内存。然后就是 内容嵌入也避免了对象的额外开销，减少了活跃对象的数量和内存分配的次数

## 字典

字典是内置类型中的唯一的映射结构，基于哈希表存储键值对数据

值是可以为任意数据，但主键必须是可哈希类型。常见的可变类型，列表，集合等都不能作为主键使用。即便元组等不可变的类型，也不能引用可变类型元素。
```
>>> {"a": 1, "b":2}
>>> dict(a = 1, b = 2)
{'a':1, 'b':2}
>>> print(dict(zip("abc", range(3))))
{'a': 0, 'b': 1, 'c': 2}
>>>(dict(map(lambda k, v: (k, v + 10), "abc", range(3))))
{'a': 10, 'b': 11, 'c': 12}
```

字典不是序列类型，不支持序号访问，以主键读取，新增或删除内容

## 集合

集合存储非重复对象。所谓非重复，是指除不是同一对象外，值也不能相等。

	-  判重公式 (a is b) or (hash(a)) == (hash(b)) and a==b

